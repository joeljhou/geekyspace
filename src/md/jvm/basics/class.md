---
title: 类字节码详解
description:
author: 会敲代码的程序猿
isOriginal: true
date: 2024-07-19
category: JVM
tag: JVM
order: 2
---

# 类字节码详解

## 引言

计算机不能直接运行Java代码。必须先运行Java虚拟机（JVM），再由JVM运行编译后的Java代码。
这个编译后的Java代码，就是我们要介绍的Java字节码。

## 无关性的基石

* **平台无关性：** 字节码可以在任何支持JVM的平台上运行，实现“一次编写，到处运行”。 
* **语言无关性：** 多种编程语言可以编译成字节码并在JVM上运行，不仅限于Java。

![Java虚拟机提供的语言无关性](https://img.geekyspace.cn/pictures/2024/202407200209120.png)

## Java字节码文件

Class文件本质上是一组以8个字节为基础单位的二进制流，各数据项严格按顺序紧密排列，中间没有任何分隔符。
JVM根据其特定的规则解析该二进制数据，从而得到相关信息。

### Class类文件的结构

![Class类文件的结构](https://img.geekyspace.cn/pictures/2024/202407200258362.png)

Java字节码是以类文件（`.class`）形式存储的，包含如下结构属性：

1. **魔数：** 用于标识类文件的起始部分，通常是固定的值（`0xCAFEBABE`） 
2. **版本号：** 表示类文件的版本，包括主版本号和次版本号，即编译时的Java版本
3. **常量池：** 存储了类文件中用到的所有常量，包括字符串、数值和类引用等
4. **访问标志：** 描述类或接口的访问权限和其他属性，如`public`、`abstract`、`final`等
5. **类索引、父类索引和接口索引集合：** 分别指向常量池中的项，用于标识类、父类和实现的接口
6. **字段表：** 定义类或接口中的成员变量，包括类型、名称和修饰符等信息
7. **方法表：** 定义类或接口中的方法，包括名称、参数和修饰符等信息
8. **属性表：** 存储类、字段、方法等相关的附加信息，如代码段、异常处理表等


